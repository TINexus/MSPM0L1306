ARM GAS  1.s 			page 1


   1              		@MSPM0L1306
   2              		@编译器ARM-NONE-EABI
   3              	
   4              		.thumb
   5              		.syntax unified
   6              		.section .text
   7              	vectors:
   8 0000 00010020 		.word zhanding
   9 0004 41000000 		.word kaishi + 1
  10 0008 95000000 		.word _nmi	+1
  11 000c 95000000 		.word _Hard_Fault +1
  12 0010 00000000 		.word 0
  13 0014 00000000 		.word 0
  14 0018 00000000 		.word 0
  15 001c 00000000 		.word 0
  16 0020 00000000 		.word 0
  17 0024 00000000 		.word 0
  18 0028 00000000 		.word 0
  19 002c 95000000 		.word _svc_handler +1
  20 0030 00000000 		.word 0
  21 0034 00000000 		.word 0
  22 0038 95000000 		.word _pendsv_handler +1
  23 003c 95000000 		.word _systickzhongduan +1  @ 15
  24              	
  25              		
  26              	kaishi:
  27              	__IOMUX_she_zhi:	
  28              	@	ldr r0, = 0x40428000
  29              	__dma:
  30 0040 1548     		ldr r0, = 0x4042a000	@DMA寄存器基址
  31 0042 1649     		ldr r1, = 0x1110	@DMATCTL寄存器偏移地址
  32 0044 0322     		movs r2, # 0x03		@adc0 触发通道选择
  33 0046 4250     		str r2, [r0, r1]
  34              	
  35              	
  36 0048 1549     		ldr r1, = 0x1204	@DMASA寄存器偏移地址
  37 004a 164A     		ldr r2, = 0x4055a280	@传输源地址，ADC别名区
  38 004c 4250     		str r2, [r0, r1]
  39              	
  40 004e 1649     		ldr r1, = 0x1208	@DMADA寄存器偏移地址
  41 0050 164A     		ldr r2, = 0x20000200	 @传输目标地址
  42 0052 4250     		str r2, [r0, r1]
  43              	
  44 0054 1649     		ldr r1, = 0x120c	@DMASZ寄存器偏移地址
  45 0056 174A     		ldr r2, = 12		@传输数量
  46 0058 4250     		str r2, [r0, r1]
  47              	
  48 005a 1749     		ldr r1, = 0x1200	@DACCTL控制寄存器偏移地址
  49 005c 174A     		ldr r2, = 0x20301102	@0x20301102	
  50 005e 4250     		str r2, [r0, r1]	@开DMA，设置传输模式
  51              		
  52              	__adc0:
  53 0060 1748     		ldr r0, = 0x40004000	@寄存器基址
  54 0062 1849     		ldr r1, = 0x800		@寄存器偏移
  55 0064 184A     		ldr r2, = 0x26000001	
  56 0066 4250     		str r2, [r0, r1]	@开电源
  57              	
ARM GAS  1.s 			page 2


  58 0068 1849     		ldr r1, = 0x808		@CLKCFG  ADC时钟配置寄存器
  59 006a 194A     		ldr r2, = 0xa9000002
  60 006c 4250     		str r2, [r0, r1]
  61              	
  62 006e 1949     		ldr r1, = 0x1088	@IMASK
  63              					@DMA_TRIG
  64 0070 194A     		ldr r2, = 0x100
  65 0072 4250     		str r2, [r0, r1]	@触发DMA相关
  66              	
  67 0074 0949     		ldr r1, = 0x1110	@CLKFREQ 采样时钟范围
  68 0076 0522     		movs r2, # 5
  69 0078 4250     		str r2, [r0, r1]
  70              	
  71 007a 1849     		ldr r1, = 0x1104  	@CTL1 控制寄存器1
  72 007c 184A     		ldr r2, = 0x30100
  73 007e 4250     		str r2, [r0, r1]	@序列重复转换
  74              	
  75 0080 1849     		ldr r1, = 0x1108	@CTL2控制寄存器2
  76 0082 194A     		ldr r2, = 0x3000900
  77 0084 4250     		str r2, [r0, r1] 	@转换序列选择
  78              	
  79 0086 1949     		ldr r1, = 0x1184
  80 0088 0122     		movs r2, # 0x01
  81 008a 4250     		str r2, [r0, r1]
  82              		
  83 008c 1849     		ldr r1, = 0x1100  	@CTL0 控制寄存器 0
  84 008e 194A     		ldr r2, = 0x10001
  85 0090 4250     		str r2, [r0, r1]   
  86              		
  87              		
  88              	
  89              	
  90              		
  91              	ting:
  92              	
  93 0092 FEE7     		b ting
  94              		
  95              	_nmi:
  96              	_Hard_Fault:
  97              	_svc_handler:
  98              	_pendsv_handler:	
  99              	_systickzhongduan:
 100              	aaa:
 101 0094 7047     		bx lr
 102              		
 103 0096 0000     		.section .data
 104              		.equ zhanding,	0x20000100
 105              		
ARM GAS  1.s 			page 3


DEFINED SYMBOLS
                 1.s:7      .text:00000000 vectors
                            *ABS*:20000100 zhanding
                 1.s:26     .text:00000040 kaishi
                 1.s:95     .text:00000094 _nmi
                 1.s:96     .text:00000094 _Hard_Fault
                 1.s:97     .text:00000094 _svc_handler
                 1.s:98     .text:00000094 _pendsv_handler
                 1.s:99     .text:00000094 _systickzhongduan
                 1.s:27     .text:00000040 __IOMUX_she_zhi
                 1.s:29     .text:00000040 __dma
                            .text:00000000 $d
                 1.s:30     .text:00000040 $t
                 1.s:52     .text:00000060 __adc0
                 1.s:91     .text:00000092 ting
                 1.s:100    .text:00000094 aaa
                 1.s:103    .text:00000096 $d
                 1.s:105    .text:00000098 $d

NO UNDEFINED SYMBOLS
